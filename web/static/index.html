<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="assets/lib/bootstrap/main/dist/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="assets/lib/@loadingio/bootstrap.ext/main/index.min.css"><link rel="stylesheet" type="text/css" href="assets/lib/ldcover/main/index.min.css"><style type="text/css">body{background:#e4f0ff}</style></head><body><div class="ldcv"><div class="base" style="width:640px;max-width:80%;height:8em;"><div class="inner"><div class="p-4"><h3 class="mb-4">Building ...</h3><div class="progress"><div class="progress-bar progress-bar-striped progress-bar-animated" ld="progress" style="width:0%"></div></div></div></div></div></div><div class="w-1024 rwd mx-auto my-4"><h1>@plotdb/ffmpeg</h1><p>in browser webm / mp4 / animated webp generation</p><br><div class="d-flex justify-content-center"><div class="form-group mx-2"><label class="text-sm">Methods</label><select class="form-control border border-dark" ld="method"><option value="url">URL</option><option value="img">Image()</option></select></div><div class="form-group mx-2"><label class="text-sm">Output Format</label><select class="form-control border border-dark" ld="format"><option value="mp4">MP4</option><option value="webm">WebM</option><option value="webp">WebP</option></select></div><div class="form-group mx-2"><label class="text-sm">Sample Sequence</label><div class="dropdown" ld="dropdown"><div class="btn btn-light border border-dark d-block dropdown-toggle text-capitalize" ld="sample-name" data-toggle="dropdown">Ripple</div><div class="dropdown-menu shadow-sm"><div class="dropdown-item text-capitalize" ld-each="sample-item"></div></div></div></div><div class="form-group mx-2"><label class="text-sm">&nbsp; &nbsp;</label><div class="btn btn-light border border-dark d-block" ld="convert">Convert</div></div></div><div class="d-flex justify-content-center my-4"><div class="text-center"><div class="d-none" ld="video" style="width:200px;height:200px"></div><img ld="image" style="width:200px;height:200px"><br><a class="my-4 d-none" ld="download">download link</a></div></div></div><script type="text/javascript" src="assets/lib/bootstrap.native/main/dist/bootstrap-native-v4.min.js" defer></script><script type="text/javascript" src="assets/lib/@loadingio/debounce.js/main/index.min.js" defer></script><script type="text/javascript" src="assets/lib/@loadingio/ldquery/main/index.min.js" defer></script><script type="text/javascript" src="assets/lib/ldview/main/index.min.js" defer></script><script type="text/javascript" src="assets/lib/ldcover/main/index.min.js" defer></script><script type="text/javascript" src="assets/lib/@plotdb/ffmpeg/main/index.min.js" defer></script><script type="module">(function(t){return t.apply({})})(function(){var t,o=this;t=[{name:"bars",frame:30},{name:"clouds",frame:150},{name:"ripple",frame:30},{name:"spinner",frame:250},{name:"wedges",frame:92}];this.format="webm";this.sample=t[0];this.method="url";this.output=null;this.ldcv=new ldcover({root:".ldcv",lock:true,resident:true});this.ffmpeg=new ffmpeg;this.ffmpeg.init();this.render=function(){var t;t=function(){var t,e,r=[];for(t=1,e=this.sample.frame;t<=e;++t){r.push(t)}return r}.call(o).map(function(t){return"/assets/img/"+o.sample.name+"/frame-"+t+".png"});if(o.method==="img"){t=t.map(function(t){var e;e=new Image;e.src=t;return e})}return o.ffmpeg.init().then(function(){o.progress=0;o.view.render("progress");return o.ldcv.toggle(true)}).then(function(){return o.ffmpeg.convert({files:t,format:o.format,progress:function(t){o.progress=t*100;return o.view.render("progress")}})}).then(function(t){return debounce(500).then(function(){return t})}).then(function(t){console.log(t);o.output={blob:t,url:URL.createObjectURL(t)};return o.view.render()}).then(function(){return o.ldcv.toggle(false)})};return this.view=new ldview({root:document.body,action:{click:{convert:function(){return o.render()}},input:{method:function(t){var e;e=t.node;return o.method=e.value||"url"},format:function(t){var e;e=t.node;return o.format=e.value||"webm"}}},init:{format:function(t){var e;e=t.node;return e.value=o.format||"webm"},dropdown:function(t){var e;e=t.node;return new BSN.Dropdown(e)}},handler:{progress:function(t){var e;e=t.node;return e.style.width=o.progress+"%"},"sample-item":{list:function(){return t},action:{click:function(t){var e;e=t.data;o.sample=e;return o.view.render("sample-name")}},text:function(t){var e;e=t.data;return e.name}},"sample-name":function(t){var e;e=t.node;return e.textContent=o.sample.name},download:function(t){var e;e=t.node;e.classList.toggle("d-block",!!o.output);e.classList.toggle("d-none",!o.output);if(!o.output){return}e.setAttribute("href",o.output.url);return e.setAttribute("download","output."+o.format)},video:function(t){var e,r,n;e=t.node;if(!o.output){return}e.classList.toggle("d-none",o.format==="webp");if(o.format==="webp"){return}e.textContent="";r=document.createElement("video");n=document.createElement("source");r.setAttribute("width",200);r.setAttribute("height",200);r.setAttribute("controls","");r.setAttribute("loop","");n.setAttribute("src",o.output.url);r.appendChild(n);return e.appendChild(r)},image:function(t){var e;e=t.node;if(!o.output){return}e.classList.toggle("d-none",o.format!=="webp");if(o.format!=="webp"){return}return e.setAttribute("src",o.output.url)}}})});</script></body></html>